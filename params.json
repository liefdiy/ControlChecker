{"name":"Controlchecker","tagline":"控件自动化测试工具","body":"# 引言\r\n\r\n你刚开始使用MAP进行开发的时候是否也碰到类似的烦恼：\r\nappForm子控件的type属性支持哪些值，区分大小写吗？\r\nappGridE控件支持哪些属性？\r\n界面出来了，SQL在SQL SERVER中查询也没问题，为何会报黄页？\r\nappGrid看似正常，一点排序就悲剧了，是何缘故？\r\n......\r\n\r\n然后看到BUG系统中一堆类似的问题而焦虑、烦躁，其实大家都有这么个过程。现在有了一个叫做控件配置检测的工具，帮你在开发过程中及时发现你配置上的问题，提高开发质量，减少BUG系统给你造成的心理负担，来看看吧。\r\n\r\n# 工具下载\r\n工具本身是很亲C#码农的，您可以在 \\\\10.5.10.15\\武汉研发与技术支持中心\\部门级配置目录\\运维交付中心\\平台开发部\\平台开发部工具\\配置文件检测工具\\ 中找到它，它的界面长这个样子：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/73241397210888.png)\r\n\r\n# 工具说明\r\n## 运行\r\n工具运行很简单，打开XML配置文件，按下F5或者点下三角板按钮即可：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/37271397210888.png)\r\n\r\n## 配置数据库连接\r\n开始检测时会弹出配置数据库参数的窗口，选择一个你本机的数据库连接配置项：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/46111397210888.jpg)\r\n点击Test按钮测试是否可以连接数据库，连接好后点击OK，这时配置就被保存了，下次打开的时候默认还是它。其实也可以点击下面这个按钮打开数据库连接配置窗口：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/45711397210888.png)\r\n\r\n## 检测结果呈现\r\n运行完成后，会在“检测结果”面板中展示：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/19321397210888.png)\r\n\r\n## 格式化代码\r\n我们再来看看他的其他功能。按下F6或者点下面的按钮试试，他可以帮你格式化XML。\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/16411397210888.png)\r\n\r\n## 把它当做一个IDE\r\n甚至你可以把这工具当个IDE或编辑器用，点下浏览按钮，选择你的MAP项目根目录。\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/3421397210888.jpg)\r\n再看看项目文件列表，MAP中的配置文件就呈现出来了：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/98971397210888.jpg)\r\n双击文件，或者右键点击试试~\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/5831397210888.jpg)\r\n\r\n# 使用方法\r\n上面介绍了工具的一些操作方法，集成到Visual Studio中可能会让你更舒服。按下面的方法配置下吧。\r\n1.在VisualStudio（任意版本）中选择【工具】 - 【外部工具】\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/2381397210888.png)\r\n\r\n2.点击【添加】，输入一个你喜欢的\"标题\"，\"命令\"选择MyControlChecker.exe可执行程序的路径，\"初始目录\"为该可执行程序的目录，\"参数\"选择“项路径”，如下图：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/5851397210888.png)\r\n\r\n3.好了，选中一个MAP配置文件，点击【工具】-【ControlChecker】\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/70001397210888.png)\r\n\r\n工具就打开这配置文件了：\r\n\r\n![](http://blog.mysoft.net.cn:1100/wp-content/plugins/wp-ueditor/ueditor/php/upload/29651397210888.png)\r\n\r\n4.再按下F5看看效果吧~\r\n\r\n\r\n# 工具支持\r\n\r\n* 支持所有平台控件配置字段的检测，如控件类型celltype，新增记录是否可编辑createapi，更新时能否编辑updateapi，是否必填项req，布尔类型的字段，int类型字段等；\r\n* 支持翻页查询中子查询大小写问题的校验；\r\n* 支持排序SQL的校验；\r\n* 支持AppViewList指定配置文件有效性的检测；\r\n* 支持AppForm、AppGrid的子控件指定field有效性的校验，如果配置的field在SQL中不存在，能立即检测出来；\r\n\r\n\r\n# 待完善的问题\r\n\r\n对于MAP配置文件中没有的标签，只要符合XML格式，就都认为是有效标签，并未给提示。比如page下是controls标签，如果增加一个标签<controlapp></controlapp>，工具不会提示错误。类似的，对于正确的标签，如果配置了一个MAP中没有的属性，也不会报错，比如一个正确的配置：<menuitem title=\"queryxml\" action=\"Tqueryxml()\" />，如果写成<menuitem title=\"queryxml\" actionaaa=\"Tqueryxml()\" />，因为action属性非必须，因此这样配置也不会提示错误。\r\n对于这种校验当然有解决方案，1、DTD校验；2、写个配置文件存放支持的标签，遍历XML，检测到配置中没有的标签则抛出提示。\r\n\r\n\r\n# 其它\r\n* 因为控件属性较多，即使参照SDK和代码可能还是会因为作者上年纪，眼神不犀利而遗漏掉了，还希望大家多给反馈和建议。\r\n* 项目开发中遇到的共性问题，如果需要工具支持也可以反馈给我们，我们一并改进。\r\n* MAP中约定：\"数据源中的SQL关键字必须使用大写，例如：SELECT、FROM、WHERE、ORDER BY。如果使用嵌套的SQL语句，那么子查询中的SQL关键字必须小写。\"但是也有些牛人把MAP玩的炉火纯青，以至于不按这个规定仍能正确配置SQL，所以，本工具比这些牛人差远了，因此对该规则只能置为警告，而非错误，所以有时候警告您也得关注一下。\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}